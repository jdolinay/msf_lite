MSF lite

Poznamka z AVR:
Projekty examples staci .cproject a .project a slozka .settings jak mam ted - overeno v eclipse ze
po importu jako existing project into workspace ( bez kopirovani do workspace) jde prelozit.
------------------------------------------------


10.6.2014
pokracuj: conioB vysilani...
_TODO: upravit UART driver aby dokazal soucasne prijimat a vysilat, pro ConioB chci ab
na pozadi stale prijimal a pritom abych mohl vysilat...
- rozhodunuto udelat "buffered conio", protoze chci mit i pro programatorske pouziti, nejen 
s "arduino" api...

REMEM: K implementaci buffered conio s ring buffer (FIFO):
Vidim 2 moznosti jak spojit buffers s UART_Driver v interrupt modu:
1) volat UART.Receive(buf,1) a v callback udealt PUSH do FIFO
2) volat UART.Receive(buf, velikost_FIFO) a nechat driver aby na poradi plnil
buffer i kdyz o tom logika FIFO nic nevi. V conio_getch pak pomoci UART.GetRxCount
zjistit kolik mam polozek ve FIFO a nastavit na ni hodnotu pred ctenim.
END REMEM

9.6.2014
Pokracuj: conio s bufferem ? zvlast nebo jako rozsireni?
 > spis rozsireni funkce a pridani bufferu?
 > nebo vubec nedelat conio a primo do Serial? -asi ano
TODO: resit zmenu baudrate pro conio resp UART driver, viz msf_init nastavi napr. 
9600 prez initialize a ja pak chci pro serial.begin zmenit.
+ chce to mit moznost v conio driveru nastavit.
 > uart driver uz umi, testovano.  


 
- UART driver funguje.

6.6.2014
_Pokracuj: odladit uart example; nefunguje prijem znaku na pozadi podruhe, prvni prijem ok, pak se "zacyklil" v ISR.
REMEM: pouziti uart v int modu je nepohodle pro normalni aplikaci, napr. nemuze 
udelat 2x hned za sebou Send nebo Send a hned receive...
REMEM: (pro MSF) driver jako uart s prijmem na pozadi je asi zbytecne narocny na pamet pro simple 8-bit pouziti,
problem jak poskytovat jednoduchy pro napr. MCU s 4KB flash a full-featured pro MCU s 60 KB flash.
mozna jednoduchy C jako jsem mel a nad tim CMSIS-like volajici jeho funkce kde to jde?
 > nevyhne se 2x psat stejny kod resp. 2 ovladace pro totez :()
> LEPSI asi "option" pro implementatory MSF zda zvoli "simple" driver API nebo FULL.

5.6.2014
_Pokracuj: tx pro int mode a testovat! + ABORT RX A TX DO CONTROL...
_TEST: UART driver nastaveni baud a int/polled mode.
TODO: uart/serial musi mit buffer. UART driver dle CMSIS kazdy send/receive dela pres buffer =data od uzivatele.
 - mozna do conio buffer?
 

4.6.2014
Pokracuj: dodelani Serial + otestovani analog funkci, casovacich a serial.
> Serial v arduino umi i paritu a datove bity :(
TODO: v conio driveru nacteni stringu? msf_read_str() krome read_char (?)
 > mam viz conio_gets() 
TODO: testovat analog Reference()
_TODO: resim nejak v gpio pouziti analog input pinu jako digital = prepinam funkci pinu?
 - co kdyz pin je pro UART; jak pak pouziju pro GPIO.
 - Ano, gpio_direction si nastavuje mux na GPIO mode.

3.6.2014
_Pokracuj: analogRead + pridat do ADC driveru nastaveni reference.
- ok projekt pro arduino s blikanim LED :)

2.6.2014
_Pokracuj: doresit arduino.h a jeho preklad, pak example pro arduino (asi novy projekt) 
_TODO: v postupu vytvoreni projektu vyuzit nove templates slozku s upravenymi soubory..

30.5.2014
Pokracuj: blink dodelat s definicemi board pinu - toto bude v aktualnim projektu = example na MSF...
_TODO: piny v msf_kl25z.h aktualizovat i do MSF verze!

29.5.2014
_Pokracuj: doresit preklad blink za soucasne tvorby navodu v cw10_howto.txt
Vytvoren example project blink (workspace moje v doc ale lokace projektu je v msf_lite\examples...),

REMEM: k Arduino wrapperu
Zakladni filozofice je umoznit zacatecnikum pouzit zname arduino funkce, ale smerovat
je stejne na nativni MSF C-API. Tedy nema smysl implementovat slozite funkcnosti z Arduina,
jako je Serial.find(), radeji nasmerovat uzivatele na jejich nativni ekvivalent.
END REMEM

REMEM: k "template" projektum v Eclipse= CW
Existují viz http://help.eclipse.org/kepler/index.jsp?topic=%2Forg.eclipse.cdt.doc.isv%2Fguide%2FprojectTemplateEngine%2FHowtoregistertemplates.html
od CDT 4.0, pøitom cw 10.5 má prý CDT 8.x, ale nevím...
Registrace je složitá pøes vytváøení plugin projektu.
Nevím jestli snadno jde když potøebuji "naklonovat" projekt CW wizarda ktery je dost složitý.
TIP: jde exportovat project settings pres Export > C/C++ > Export project settings.
END REMEM


REMEM: filozofie Receive funkce v CMSIS driveru pro UART
Uzivatel zavola Receive a preda buffer + kolik znaku chce nacist. Funkce hned
vrati (je non-blocking) a na pozadi nacita s vyuzitim DMA nebo INT.
Po prijeti pozadovaneho poctu znaku vola callback = generuje udalost ARM_USART_EVENT_RECEIVE_COMPLETE.
Jde zjistit aktualni pocet nactenych pres ARM_USART_GetRxCount()
END REMEM

///////////////////////////////////////////////////////
Zmenene soubory, ktere synchronizovat do MSF:
(po synchronizaci zde zaznam smazat)
- msf_mkl25z.h
